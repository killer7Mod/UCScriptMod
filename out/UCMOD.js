function baseToString(a){try{var c=android.util.Base64;return new java.lang.String(c.decode(a,c.DEFAULT))}catch(b){return null}}function stringToBase(a){try{var c=android.util.Base64;return new c.encodeToString(a.getBytes(),c.DEFAULT)}catch(b){return null}}function getDraw(a){try{return android.graphics.drawable.Drawable.createFromStream(new java.io.FileInputStream(a),a)}catch(b){return android.graphics.drawable.ColorDrawable(android.graphics.Color.BLACK)}}function new_menu(e,d,f){return com.uc.browser.cy(new java.lang.Integer(e),new java.lang.Integer(d),new java.lang.Integer(f))}function new_acn(c,b){var a=getClasse("acn").getConstructor(java.lang.Integer.TYPE,java.lang.String);return a.newInstance(new java.lang.Integer(c),b)}function new_option_button(b,a){return getClasse("adj").getConstructor(java.lang.Integer.TYPE,java.lang.String).newInstance(new java.lang.Integer(b),a)}function getClasse(a){return Class.forName(a,false,mActivity.getClass().getClassLoader())}function isURL(a){var b=/\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/i;return b.test(a)}function JsArrayToJavaArray(c,a){var d=java.lang.reflect.Array.newInstance(c,a.length);for(var b=0;b<a.length;b++){d[b]=a[b]}return d}function JavaArrayToJsArray(a){var b=[];for(i=0;i<a.length;++i){b[i]=a[i]}return b}function dpToPx(b){var a=android.util.TypedValue.applyDimension(android.util.TypedValue.COMPLEX_UNIT_DIP,b,mActivity.getResources().getDisplayMetrics());return a}var mLang;function loadLang(){mLang={};var a=com.wmods.utils.LangUtils.getLang();if(a.equals("pt")){mLang={LANG:"pt",JSMOD:["Gerador Play Store","Gerador Google Drive","Gerador Mega","Gerador 4shared","Gerador Userscloud","Gerador dailyuploads"],GN:"Geradores",VS:"Ver Codigo Fonte",GL:"Gerando link...",GS:"Gerado com sucesso!",GE:"Erro ao gerar Link",JSUP:"JSMOD Atualizado!",LIST_R:"Removido!",NO_SCRIPT:"Sem Scripts",ADD:"Adicionar",F_EMPTY:"O campo está vazio",NAME_E:"O nome já existe!",NAME:"Nome",CODE:"Codigo",ADDED:"Adicionado script",SCRIPT_E:"Script já Existe"}}else{mLang={LANG:"en",JSMOD:["Generator Play Store","Generator Google Drive","Generator Mega","Generator 4Shared","Generator Userscloud","Generator dailyuploads"],GN:"Generators",VS:"View Source",GL:"Generating Link...",GS:"successfully generated",GE:"Error generating Link",JSUP:"JSMOD Updated!",LIST_R:"Removed!",NO_SCRIPT:"No Scripts",ADD:"Add",F_EMPTY:"Field is Empty",NAME_E:"The name already exists!",NAME:"Name",CODE:"Code",ADDED:"Added script",SCRIPT_E:"Script already exists"}}}function getLangString(a){if(!mLang){loadLang()}var b=mLang[a];return(b?b:"Lang: "+a)}var mActivity=getMainContext(0);var FDIR=mActivity.getFilesDir();var update;var version="0.0.8";var menu_di;var iniProp;var GUIPainel;var mOptions;var tempG=[];var tempJS=new java.util.ArrayList();var tempJSN=new java.util.ArrayList();var mPos;var layoutOptions;var scroll;var GUIOptions;var Class=Packages.java.lang.Class;var URLControl=Packages.com.wmods.modding.URLControl;var Utils=Packages.com.wmods.modding.Utils;var LangUtils=Packages.com.wmods.utils.LangUtils;var LayoutParams=Packages.android.widget.LinearLayout.LayoutParams;var TextUtils=Packages.android.text.TextUtils;function hook_url(b){if(mOptions==null){loadOptions()}if(!b){return true}b=b.replace("press_link:","");var a=new URLControl(b);var c;if((c=a.getHost())==null){return false}if(c.contains("drive.google.com")&&mOptions[0][1]){return directGoogle(b)}if((c.contains("play.google.com")&&mOptions[0][0])||((c.contains("mega.co.nz")||c.contains("mega.nz"))&&mOptions[0][2])||(c.contains("userscloud.com")&&mOptions[0][4])||((c.equals("dailyuploads.net")||c.equals("www.dailyuploads.net"))&&mOptions[0][5])){generator(b);return true}if(c.contains("4shared.com")&&mOptions[0][3]){generator4shared(b.replace("www.4shared.com","www.goowap.com"))}if(c.contains("upload.mobi")&&a.getPath()?!a.getPath().contains("download"):false){generatorUpload(b);return true}if(c.contains("ucmod.script")){addNewJS(b);return true}var d=a.getPath();if(d&&d.contains("//:ptth")){var f=d.lastIndexOf("=");if(f!=-1){var e=new java.lang.StringBuffer();e.append(d.substring(f+1));print("Reverse URL Found!!");openURL(e.reverse().toString());return true}}return false}function hook_updated(){loadLang();loadOptions();var a=com.uc.browser.p.f();var b=a.getClass().getDeclaredField("y");b.setAccessible(true);if(b.get(a)!=null){b.set(a,new com.uc.browser.cm(mActivity))}showUpdate()}function hook_select_file(a){}function hook_proxy(a){return false}function hook_page(a){if(!mOptions){loadOptions()}addNewButton()}function hook_options_button(c,d){if(d==61441){openURL('ext:es:javascript:location.href="View-Source:".concat(location.href)')}else{if(d==61442){showJSInjector()}else{if(d==61443){var b=new android.content.Intent("android.intent.action.VIEW");var a=c.Y().ag();if(a==null){a=c.S}b.setData(android.net.Uri.parse(a));mActivity.startActivity(android.content.Intent.createChooser(b,"URL"))}}}}function hook_select_button(a){}function hook_select_button_listener(a,b){}function hook_menu_new(a,b){menu_di=new_menu(65284,65283,65028);menu_di.d(isUpdated());b.add(menu_di)}function hook_menu_name(b,a){switch(b){case 65283:a.add("JS MOD");break}}function hook_menu_draw(b,a){switch(b){case 65028:a.add(getDraw(FDIR.getAbsolutePath()+"/script/jsmod.png"));break}}function hook_menu_check(a){switch(a){case 65284:showJSMOD();if(isUpdated()){setMenuUpdated(false)}break}}function hook_mod_service(a,b){}function newGUIOptions(){GUIOptions=[{name:getLangString("GN"),options:getGenerators()},{name:"Javascript",options:getJavascript()},{name:"Other",options:getOther()}]}function showJSMOD(){loadOptions();if(!GUIOptions){newGUIOptions()}mActivity.runOnUiThread(function(){var b=getClasse("agd");GUIPainel=b.getConstructor(android.content.Context).newInstance(mActivity);GUIPainel.setTitle("JSMOD");var e=new android.widget.LinearLayout(mActivity);e.setBackgroundColor(16777215);e.setOrientation(1);var f=[];for(var d=0;d<GUIOptions.length;d++){f[d]=GUIOptions[d].name}var g=new android.widget.Spinner(mActivity);var c=new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT);c.setMargins(0,0,0,dpToPx(3));g.setLayoutParams(c);var a=new android.widget.ArrayAdapter(mActivity,17367050,JsArrayToJavaArray(java.lang.String,f));g.setAdapter(a);g.setBackgroundColor(android.graphics.Color.rgb(0,0,63));scroll=new android.widget.ScrollView(mActivity);scroll.setScrollbarFadingEnabled(false);layoutOptions=new android.widget.LinearLayout(mActivity);layoutOptions.setBackgroundColor(android.graphics.Color.rgb(0,0,0));layoutOptions.setOrientation(1);g.setOnItemSelectedListener({onItemSelected:function(k,j,h,l){setViews(layoutOptions,h);mPos=h},onNothingSelected:function(h){}});e.addView(g);scroll.addView(layoutOptions);e.addView(scroll);GUIPainel.a(e);GUIPainel.setOnDismissListener(function(h){layoutOptions.removeAllViews();loadOptions()});GUIPainel.b(LangUtils.getString("SAVE"),function(h){h.dismiss();saveOptions()});GUIPainel.a(LangUtils.getString("CANCEL"),function(h){h.dismiss();loadOptions()});GUIPainel.show()})}function showEditor(a){mActivity.runOnUiThread(function(){var d=new android.app.AlertDialog.Builder(mActivity);d.setTitle("JavaScript "+getLangString("CODE"));var c=new android.widget.LinearLayout(mActivity);c.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));c.setOrientation(1);c.setBackgroundColor(android.graphics.Color.BLACK);var b=new android.widget.TextView(mActivity);b.setText(getLangString("NAME")+": "+tempJSN.get(a));var e=new android.widget.EditText(mActivity);e.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,dpToPx(200)));e.setGravity(android.view.Gravity.TOP);e.setText(tempJS.get(a));c.addView(b);c.addView(e);d.setView(c);d.setPositiveButton(Lang.getString("SAVE"),function(f,h){var g=e.getText().toString();if(g.trim().length()==0){print(getLangString("F_EMPTY"));return}tempJS.set(a,g);f.dismiss()});d.setNeutralButton(Lang.getString("CANCEL"),null);d.show()})}function showJSInjector(){mActivity.runOnUiThread(function(){var a=getClasse("abg");GUIPainel=a.getConstructor(android.content.Context).newInstance(mActivity);GUIPainel.setTitle("JavaScript "+getLangString("CODE"));if(mOptions[1][0].size()==0){print(getLangString("NO_SCRIPT"));return}var b=mOptions[1][0].toArray(new java.lang.reflect.Array.newInstance(java.lang.String,0));GUIPainel.a(b,function(e,c){GUIPainel.dismiss();openURL("ext:es:javascript:"+mOptions[1][1].get(c))});GUIPainel.show()})}function setViews(e,a){e.removeAllViews();if(a==0){scroll.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,dpToPx(150)))}else{scroll.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT))}var d=GUIOptions[a].options;for(var c=0;c<d.length;c++){switch(a){case 0:if(mOptions[0]){d[c].setChecked(mOptions[0][c])}break;case 1:if(c==0){var b=new android.widget.ArrayAdapter(mActivity,17367050,tempJSN);d[0].setAdapter(b)}break}e.addView(d[c])}}function loadIni(){var a=new java.io.File(FDIR,"JSMOD.ini");iniProp=new java.util.Properties();if(a.exists()){iniProp.load(new java.io.FileInputStream(a))}}function saveIni(){var a=new java.io.File(FDIR,"JSMOD.ini");iniProp.store(new java.io.FileOutputStream(a),"WellingtonMods")}function loadOptions(){var g;if(!iniProp){loadIni()}mOptions=[];g=iniProp.getProperty("JSMOD",null);if(g){var d=new java.lang.reflect.Array.newInstance(java.lang.Boolean.TYPE,getLangString("JSMOD").length);var c=g.split("\\|");var a=c.length>d.length?d.length:c.length;for(i=0;i<a;i++){d[i]=c[i].equals("true")}mOptions[0]=d}g=iniProp.getProperty("JSScriptN",null);str2=iniProp.getProperty("JSScriptV",null);tempJSN=new java.util.ArrayList();tempJS=new java.util.ArrayList();if(g&&g.length()>0&&str2){var c=str2.split("\\|\\|");var f=g.split("\\|");for(i=0;i<c.length;i++){var e=baseToString(c[i]);if(!e){tempJS.add(c[i])}else{tempJS.add(e)}var b=baseToString(f[i]);if(!b){tempJSN.add(f[i])}else{tempJSN.add(b)}}mOptions[1]=[tempJSN,tempJS]}}function saveOptions(){var d,c;mOptions[0]=tempG;mOptions[1]=[tempJSN,tempJS];var e=TextUtils.join("|",tempG);d=tempJSN.toArray();for(c=0;c<d.length;c++){d[c]=stringToBase(d[c])}var b=TextUtils.join("|",d);d=tempJS.toArray();for(c=0;c<d.length;c++){d[c]=stringToBase(d[c])}var a=TextUtils.join("||",d);if(iniProp==null){loadIni()}iniProp.setProperty("JSMOD",e);iniProp.setProperty("JSScriptN",b);iniProp.setProperty("JSScriptV",a);saveIni()}function setMenuUpdated(b){if(menu_di!=null){var a=com.uc.browser.p.f();var d=a.getClass().getDeclaredField("y");d.setAccessible(true);var c=d.get(a);var d=c.getClass().getDeclaredField("A");d.setAccessible(true);var e=d.get(c).get(java.lang.Integer.valueOf(65284));menu_di.d(b);e.a(menu_di)}if(!b){setUpdate()}}function isUpdated(){if(update==null){if(iniProp==null){loadIni()}update=iniProp.getProperty("UPDATED",null)}return !version.equals(update)}function setUpdate(){if(iniProp==null){loadIni()}iniProp.setProperty("UPDATED",version);saveIni()}function showUpdate(){mActivity.runOnUiThread(function(){var a=getClasse("agd");var d=a.getConstructor(android.content.Context).newInstance(mActivity);d.setTitle(getLangString("JSUP"));var c=Utils.readFile(FDIR.getAbsolutePath()+"/script/UCMOD.txt");if(c==null){return}var b=c.split("\\|");if(b.length==2&&getLangString("LANG").equals("pt")){c=b[1]}else{c=b[0]}d.a(c);d.b("OK",null);d.show()})}function addNewButton(){var c,b,d;var a=getClasse("adi");c=a.getField("g");b=c.get(null);if(!checkYlId(b,61441)){d=JavaArrayToJsArray(b);d.push(new_option_button(61441,getLangString("VS")));d.push(new_option_button(61442,"Javascript Injector"));b=JsArrayToJavaArray(getClasse("adj"),d);c.set(null,b)}c=a.getField("f");b=c.get(null);if(!checkYlId(b,61443)){d=JavaArrayToJsArray(b);d.push(new_option_button(61443,"Abrir Como"));b=JsArrayToJavaArray(getClasse("adj"),d);c.set(null,b)}c=a.getField("e");b=c.get(null);if(!checkYlId(b,61443)){d=JavaArrayToJsArray(b);d.push(new_option_button(61443,"Abrir Como"));b=JsArrayToJavaArray(getClasse("adj"),d);c.set(null,b)}}function checkYlId(c,b){for(var a=0;a<c.length;a++){if(c[a].b==b){return true}}return false}function addNewJS(c){var e=c.indexOf("ucmod.script");var b=c.substring(e).split("/");var a=baseToString(b[1]);var d=baseToString(b[2]);if(!a||!d){return}loadOptions();if(tempJSN.contains(a)){print("Script já existe!!");return}tempJSN.add(a);tempJS.add(d);saveOptions();print("Script adicionado: "+a)}function directGoogle(b){var c=b.match(/\/d\/(.+)\//);if(c==null||c.length<2){return false}else{print(getLangString("GS"));var a="https://drive.google.com/uc?export=download&id="+c[1];openURLDirect(a);return true}}function generator(a){print(getLangString("GL"));new java.lang.Thread({run:function(){var c=getStringURL("http://www.autogeneratelink.com/link.php?link="+java.net.URLEncoder.encode(a)+"&token=agl");var b;try{b=c.match("href='([^\\']+)'")}catch(d){print(d)}if(b&&isURL(b[1])){print(getLangString("GS"));openURL(b[1])}else{print(getLangString("GE"));openURLDirect(a)}}}).start()}function generator4shared(a){print(getLangString("GL"));new java.lang.Thread({run:function(){var c=getStringURL(a);try{var b=c.match('data: "(root=(.*?)")');var c=Utils.getStringURL("http://www.goowap.com/root.html",new java.lang.String(b[1]).getBytes());print(c)}catch(d){print(d)}print(b[1])}}).start()}function generatorUpload(a){print(getLangString("GL"));new java.lang.Thread({run:function(){var c=getStringURL(a);var b=c?c.match('<a href="([^"]+)" class="download_link"'):null;if(b){print(getLangString("GS"));openURLDirect("http://upload.mobi/"+b[1])}else{print(getLangString("GE"));openURLDirect(a)}}}).start()}var textwatcher=new android.text.TextWatcher({afterTextChanged:function(b){for(var a=b.length();a>0;a--){if(b.subSequence(a-1,a).toString().equals("\n")){b.replace(a-1,a,"")}}}});function getGenerators(){var e=getLangString("JSMOD");var a=[];var f=new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT);var d=dpToPx(10);f.setMargins(0,d,0,d);for(var b=0;b<e.length;b++){var c=new android.widget.CheckBox(mActivity);c.setTag(b);c.setText(e[b]);c.setLayoutParams(f);c.setSelected(true);c.setEllipsize(android.text.TextUtils.TruncateAt.MARQUEE);c.setSingleLine(true);c.setOnCheckedChangeListener(function(g,h){var j=Math.floor(g.getTag());tempG[j]=h});a[b]=c}return a}function getOther(){var a=[];a[0]=new android.widget.TextView(mActivity);a[0].setText("UC Super MOD: New Functions\nComing soon...");a[0].setTextSize(18);a[1]=new com.uc.browser.UCButton(mActivity);a[1].setText("FACEBOOK");a[1].setOnClickListener(function(b){GUIPainel.dismiss();openURL("ext:wo:http://m.facebook.com/UCSuperMOD")});return a}function getJavascript(){var a=[];var d=new android.widget.ListView(mActivity);d.setScrollbarFadingEnabled(false);var c=new LayoutParams(LayoutParams.MATCH_PARENT,dpToPx(200));c.setMargins(0,dpToPx(10),0,0);d.setLayoutParams(c);d.setOnItemLongClickListener(function(g,f,e,h){tempJS.remove(e);tempJSN.remove(e);g.getAdapter().notifyDataSetChanged();print(getLangString("LIST_R"));return true});d.setOnItemClickListener(function(g,f,e,h){showEditor(e)});var b=new com.uc.browser.UCButton(mActivity);b.setOnClickListener(function(e){newJavascript()});b.setText(getLangString("ADD"));return[d,b]}function newJavascript(){layoutOptions.removeAllViews();var h=new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT);var e=dpToPx(10);h.setMargins(0,e,0,0);var d=new android.widget.TextView(mActivity);d.setText(getLangString("NAME"));var g=new com.uc.browser.UCEditText(mActivity);g.addTextChangedListener(textwatcher);var c=new android.widget.TextView(mActivity);c.setText(getLangString("CODE"));var f=new com.uc.browser.UCEditText(mActivity);f.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,dpToPx(150)));f.setGravity(android.view.Gravity.TOP);var a=new com.uc.browser.UCButton(mActivity);a.setLayoutParams(h);a.setOnClickListener(function(j){var l=g.getText().toString();var k=f.getText().toString();if(l.trim().length()==0||k.trim().length()==0){print(getLangString("F_EMPTY"));return}if(tempJSN.contains(l)){print(getLangString("NAME_E"));return}tempJSN.add(l);tempJS.add(k);setViews(layoutOptions,mPos)});a.setText(getLangString("ADD"));var b=new com.uc.browser.UCButton(mActivity);b.setText(LangUtils.getString("CANCEL"));b.setLayoutParams(h);b.setOnClickListener(function(j){setViews(layoutOptions,mPos)});layoutOptions.addView(d);layoutOptions.addView(g);layoutOptions.addView(c);layoutOptions.addView(f);layoutOptions.addView(a);layoutOptions.addView(b)};